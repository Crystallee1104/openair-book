<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section2 The openair package | The openair book</title>
  <meta name="description" content="This will eventually form a book related to the openair R package." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Section2 The openair package | The openair book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This will eventually form a book related to the openair R package." />
  <meta name="github-repo" content="davidcarslaw/openair-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section2 The openair package | The openair book" />
  
  <meta name="twitter:description" content="This will eventually form a book related to the openair R package." />
  

<meta name="author" content="David C. Carslaw" />


<meta name="date" content="2020-07-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro.html"/>
<link rel="next" href="sec-importAURN.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The openair book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#hello-and-welcome"><i class="fa fa-check"></i>Hello and welcome</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="sec-openair-package.html"><a href="sec-openair-package.html"><i class="fa fa-check"></i><b>2</b> The openair package</a>
<ul>
<li class="chapter" data-level="2.1" data-path="sec-openair-package.html"><a href="sec-openair-package.html#installation-and-code-access"><i class="fa fa-check"></i><b>2.1</b> Installation and code access</a></li>
<li class="chapter" data-level="2.2" data-path="sec-openair-package.html"><a href="sec-openair-package.html#input-data-requirements"><i class="fa fa-check"></i><b>2.2</b> Input data requirements</a></li>
<li class="chapter" data-level="2.3" data-path="sec-openair-package.html"><a href="sec-openair-package.html#sec:brief-intr-open"><i class="fa fa-check"></i><b>2.3</b> Brief overview of openair</a></li>
<li class="chapter" data-level="2.4" data-path="sec-openair-package.html"><a href="sec-openair-package.html#the-type-option"><i class="fa fa-check"></i><b>2.4</b> The type option</a></li>
<li class="chapter" data-level="2.5" data-path="sec-openair-package.html"><a href="sec-openair-package.html#sec:font-size"><i class="fa fa-check"></i><b>2.5</b> Controlling font size</a></li>
<li class="chapter" data-level="2.6" data-path="sec-openair-package.html"><a href="sec-openair-package.html#sec:colours"><i class="fa fa-check"></i><b>2.6</b> Using colours</a></li>
<li class="chapter" data-level="2.7" data-path="sec-openair-package.html"><a href="sec-openair-package.html#sec:quickText"><i class="fa fa-check"></i><b>2.7</b> Automatic text formatting</a></li>
<li class="chapter" data-level="2.8" data-path="sec-openair-package.html"><a href="sec-openair-package.html#sec:multiple-plots-page"><i class="fa fa-check"></i><b>2.8</b> Multiple plots on a page</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="sec-importAURN.html"><a href="sec-importAURN.html"><i class="fa fa-check"></i><b>3</b> Accessing UK Air Quality Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="sec-importAURN.html"><a href="sec-importAURN.html#accessing-data"><i class="fa fa-check"></i><b>3.1</b> Accessing data</a></li>
<li class="chapter" data-level="3.2" data-path="sec-importAURN.html"><a href="sec-importAURN.html#site-meta-data"><i class="fa fa-check"></i><b>3.2</b> Site Meta Data</a></li>
<li class="chapter" data-level="3.3" data-path="sec-importAURN.html"><a href="sec-importAURN.html#plot-sites-on-a-map"><i class="fa fa-check"></i><b>3.3</b> Plot Sites on a Map</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sec-worldmet.html"><a href="sec-worldmet.html"><i class="fa fa-check"></i><b>4</b> Access meteorological data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="sec-worldmet.html"><a href="sec-worldmet.html#the-worldmet-package"><i class="fa fa-check"></i><b>4.1</b> The worldmet package</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="sec-windRose.html"><a href="sec-windRose.html"><i class="fa fa-check"></i><b>5</b> Wind and Pollution Roses</a>
<ul>
<li class="chapter" data-level="5.1" data-path="sec-windRose.html"><a href="sec-windRose.html#example-of-use"><i class="fa fa-check"></i><b>5.1</b> Example of use</a></li>
<li class="chapter" data-level="5.2" data-path="sec-windRose.html"><a href="sec-windRose.html#sec:comp-met"><i class="fa fa-check"></i><b>5.2</b> Comparing two meteorological data sets</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="sec-polarFreq.html"><a href="sec-polarFreq.html"><i class="fa fa-check"></i><b>6</b> Polar frequencies</a>
<ul>
<li class="chapter" data-level="6.1" data-path="sec-polarFreq.html"><a href="sec-polarFreq.html#sec:polarFreqBack"><i class="fa fa-check"></i><b>6.1</b> Background and examples</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="sec-percentileRose.html"><a href="sec-percentileRose.html"><i class="fa fa-check"></i><b>7</b> Percentile roses</a>
<ul>
<li class="chapter" data-level="7.1" data-path="sec-percentileRose.html"><a href="sec-percentileRose.html#introduction"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="sec-percentileRose.html"><a href="sec-percentileRose.html#examples"><i class="fa fa-check"></i><b>7.2</b> Examples</a></li>
<li class="chapter" data-level="7.3" data-path="sec-percentileRose.html"><a href="sec-percentileRose.html#sec:CPF"><i class="fa fa-check"></i><b>7.3</b> Condtional probability function</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="sec-polarPlot.html"><a href="sec-polarPlot.html"><i class="fa fa-check"></i><b>8</b> Polar plots</a>
<ul>
<li class="chapter" data-level="8.1" data-path="sec-polarPlot.html"><a href="sec-polarPlot.html#introduction-to-polar-plots"><i class="fa fa-check"></i><b>8.1</b> Introduction to polar plots</a></li>
<li class="chapter" data-level="8.2" data-path="sec-polarPlot.html"><a href="sec-polarPlot.html#polar-plot-examples"><i class="fa fa-check"></i><b>8.2</b> Examples</a></li>
<li class="chapter" data-level="8.3" data-path="sec-polarPlot.html"><a href="sec-polarPlot.html#nonparametric-wind-regression-nwr"><i class="fa fa-check"></i><b>8.3</b> Nonparametric Wind Regression, NWR</a></li>
<li class="chapter" data-level="8.4" data-path="sec-polarPlot.html"><a href="sec-polarPlot.html#conditional-probability-function-cpf-plot"><i class="fa fa-check"></i><b>8.4</b> Conditional Probability Function (CPF) plot</a></li>
<li class="chapter" data-level="8.5" data-path="sec-polarPlot.html"><a href="sec-polarPlot.html#pairwise-statistics"><i class="fa fa-check"></i><b>8.5</b> Pairwise statistics</a></li>
<li class="chapter" data-level="8.6" data-path="sec-polarPlot.html"><a href="sec-polarPlot.html#sec:polarCluster"><i class="fa fa-check"></i><b>8.6</b> Clustering</a></li>
<li class="chapter" data-level="8.7" data-path="sec-polarPlot.html"><a href="sec-polarPlot.html#polar-plots-on-an-interactive-map"><i class="fa fa-check"></i><b>8.7</b> Polar plots on an interactive map</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="sec-polarAnnulus.html"><a href="sec-polarAnnulus.html"><i class="fa fa-check"></i><b>9</b> Polar annulus</a>
<ul>
<li class="chapter" data-level="9.1" data-path="sec-polarAnnulus.html"><a href="sec-polarAnnulus.html#polarAnnulusBack"><i class="fa fa-check"></i><b>9.1</b> Purpose</a></li>
<li class="chapter" data-level="9.2" data-path="sec-polarAnnulus.html"><a href="sec-polarAnnulus.html#sec:examAnnulus"><i class="fa fa-check"></i><b>9.2</b> Example of use</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="sec-timePlot.html"><a href="sec-timePlot.html"><i class="fa fa-check"></i><b>10</b> Time series plots</a>
<ul>
<li class="chapter" data-level="10.1" data-path="sec-timePlot.html"><a href="sec-timePlot.html#sec:timePlotBack"><i class="fa fa-check"></i><b>10.1</b> Background</a></li>
<li class="chapter" data-level="10.2" data-path="sec-timePlot.html"><a href="sec-timePlot.html#examples-of-time-series-plotting"><i class="fa fa-check"></i><b>10.2</b> Examples of time series plotting</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="sec-timeVariation.html"><a href="sec-timeVariation.html"><i class="fa fa-check"></i><b>11</b> Temporal variations</a>
<ul>
<li class="chapter" data-level="11.1" data-path="sec-timeVariation.html"><a href="sec-timeVariation.html#sec:purpose-time-var"><i class="fa fa-check"></i><b>11.1</b> Purpose</a></li>
<li class="chapter" data-level="11.2" data-path="sec-timeVariation.html"><a href="sec-timeVariation.html#applications"><i class="fa fa-check"></i><b>11.2</b> Applications</a></li>
<li class="chapter" data-level="11.3" data-path="sec-timeVariation.html"><a href="sec-timeVariation.html#output"><i class="fa fa-check"></i><b>11.3</b> Output</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="sec-timeProp.html"><a href="sec-timeProp.html"><i class="fa fa-check"></i><b>12</b> Time proportion plots</a>
<ul>
<li class="chapter" data-level="12.1" data-path="sec-timeProp.html"><a href="sec-timeProp.html#sec:timePropBack"><i class="fa fa-check"></i><b>12.1</b> Background</a></li>
<li class="chapter" data-level="12.2" data-path="sec-timeProp.html"><a href="sec-timeProp.html#sec:timePropEx"><i class="fa fa-check"></i><b>12.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="sec-trendLevel.html"><a href="sec-trendLevel.html"><i class="fa fa-check"></i><b>13</b> Trend heat maps</a>
<ul>
<li class="chapter" data-level="13.1" data-path="sec-trendLevel.html"><a href="sec-trendLevel.html#another-way-of-representing-trends"><i class="fa fa-check"></i><b>13.1</b> Another way of representing trends</a></li>
<li class="chapter" data-level="13.2" data-path="sec-trendLevel.html"><a href="sec-trendLevel.html#sec:TrendLevelEx"><i class="fa fa-check"></i><b>13.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="sec-calendarPlot.html"><a href="sec-calendarPlot.html"><i class="fa fa-check"></i><b>14</b> Calendar plots</a>
<ul>
<li class="chapter" data-level="14.1" data-path="sec-calendarPlot.html"><a href="sec-calendarPlot.html#purpose"><i class="fa fa-check"></i><b>14.1</b> Purpose</a></li>
<li class="chapter" data-level="14.2" data-path="sec-calendarPlot.html"><a href="sec-calendarPlot.html#calendar-examples"><i class="fa fa-check"></i><b>14.2</b> Calendar examples</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="sec-TheilSen.html"><a href="sec-TheilSen.html"><i class="fa fa-check"></i><b>15</b> Theil-Sen trends</a>
<ul>
<li class="chapter" data-level="15.1" data-path="sec-TheilSen.html"><a href="sec-TheilSen.html#trend-estimates"><i class="fa fa-check"></i><b>15.1</b> Trend estimates</a></li>
<li class="chapter" data-level="15.2" data-path="sec-TheilSen.html"><a href="sec-TheilSen.html#example-trend-analysis"><i class="fa fa-check"></i><b>15.2</b> Example trend analysis</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="sec-timeVariation.html"><a href="sec-timeVariation.html#output"><i class="fa fa-check"></i><b>15.2.1</b> Output</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="sec-smoothTrend.html"><a href="sec-smoothTrend.html"><i class="fa fa-check"></i><b>16</b> Smooth trends</a>
<ul>
<li class="chapter" data-level="16.1" data-path="sec-smoothTrend.html"><a href="sec-smoothTrend.html#sec:SmoothTrendInfo"><i class="fa fa-check"></i><b>16.1</b> Background</a></li>
<li class="chapter" data-level="16.2" data-path="sec-smoothTrend.html"><a href="sec-smoothTrend.html#examples-of-trend-analysis"><i class="fa fa-check"></i><b>16.2</b> Examples of trend analysis</a></li>
<li class="chapter" data-level="16.3" data-path="sec-smoothTrend.html"><a href="sec-smoothTrend.html#seasonal-averages"><i class="fa fa-check"></i><b>16.3</b> Seasonal averages</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="sec-scatterPlot.html"><a href="sec-scatterPlot.html"><i class="fa fa-check"></i><b>17</b> Scatter plots</a>
<ul>
<li class="chapter" data-level="17.1" data-path="sec-scatterPlot.html"><a href="sec-scatterPlot.html#sec:ScatterPurpose"><i class="fa fa-check"></i><b>17.1</b> Purpose</a></li>
<li class="chapter" data-level="17.2" data-path="sec-scatterPlot.html"><a href="sec-scatterPlot.html#sec:ScatterEx"><i class="fa fa-check"></i><b>17.2</b> Examples</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="sec-scatterPlot.html"><a href="sec-scatterPlot.html#sec:hexbin"><i class="fa fa-check"></i><b>17.2.1</b> Hexaganol binning</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="sec-trajPlot.html"><a href="sec-trajPlot.html"><i class="fa fa-check"></i><b>18</b> Trajectory analysis</a>
<ul>
<li class="chapter" data-level="18.1" data-path="sec-trajPlot.html"><a href="sec-trajPlot.html#plotting-trajectories"><i class="fa fa-check"></i><b>18.1</b> Plotting trajectories</a></li>
<li class="chapter" data-level="18.2" data-path="sec-trajPlot.html"><a href="sec-trajPlot.html#sec:trajLevel"><i class="fa fa-check"></i><b>18.2</b> Trajectory gridded frequencies</a></li>
<li class="chapter" data-level="18.3" data-path="sec-trajPlot.html"><a href="sec-trajPlot.html#trajectory-source-contribution-functions"><i class="fa fa-check"></i><b>18.3</b> Trajectory source contribution functions</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="sec-trajPlot.html"><a href="sec-trajPlot.html#identifying-the-contribution-of-high-concentration-back-trajectories"><i class="fa fa-check"></i><b>18.3.1</b> Identifying the contribution of high concentration back trajectories</a></li>
<li class="chapter" data-level="18.3.2" data-path="sec-trajPlot.html"><a href="sec-trajPlot.html#allocating-trajectories-to-different-wind-sectors"><i class="fa fa-check"></i><b>18.3.2</b> Allocating trajectories to different wind sectors</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="sec-trajPlot.html"><a href="sec-trajPlot.html#potential-source-contribution-function-pscf"><i class="fa fa-check"></i><b>18.4</b> Potential Source Contribution Function (PSCF)</a></li>
<li class="chapter" data-level="18.5" data-path="sec-trajPlot.html"><a href="sec-trajPlot.html#concentration-weighted-trajectory-cwt"><i class="fa fa-check"></i><b>18.5</b> Concentration Weighted Trajectory (CWT)</a></li>
<li class="chapter" data-level="18.6" data-path="sec-trajPlot.html"><a href="sec-trajPlot.html#sec:trajCluster"><i class="fa fa-check"></i><b>18.6</b> Trajectory clustering</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="sec-conditionalQuantile.html"><a href="sec-conditionalQuantile.html"><i class="fa fa-check"></i><b>19</b> Conditional quantiles</a>
<ul>
<li class="chapter" data-level="19.1" data-path="sec-conditionalQuantile.html"><a href="sec-conditionalQuantile.html#sec:conditionalQuantileBack"><i class="fa fa-check"></i><b>19.1</b> Background</a></li>
<li class="chapter" data-level="19.2" data-path="sec-conditionalQuantile.html"><a href="sec-conditionalQuantile.html#sec:conditionalEval"><i class="fa fa-check"></i><b>19.2</b> Conditional evaluation</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="sec-modStats.html"><a href="sec-modStats.html"><i class="fa fa-check"></i><b>20</b> Model evaluation</a>
<ul>
<li class="chapter" data-level="20.1" data-path="sec-modStats.html"><a href="sec-modStats.html#sec:ModBack"><i class="fa fa-check"></i><b>20.1</b> Background</a></li>
<li class="chapter" data-level="20.2" data-path="sec-modStats.html"><a href="sec-modStats.html#sec:ModEx"><i class="fa fa-check"></i><b>20.2</b> Example of use</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="sec-TaylorDiagram.html"><a href="sec-TaylorDiagram.html"><i class="fa fa-check"></i><b>21</b> Taylor Diagam</a>
<ul>
<li class="chapter" data-level="21.1" data-path="sec-TaylorDiagram.html"><a href="sec-TaylorDiagram.html#sec:TaylorBack"><i class="fa fa-check"></i><b>21.1</b> Background</a></li>
<li class="chapter" data-level="21.2" data-path="sec-TaylorDiagram.html"><a href="sec-TaylorDiagram.html#examples-of-taylor-diagrams"><i class="fa fa-check"></i><b>21.2</b> Examples of Taylor Diagrams</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="sec-utility.html"><a href="sec-utility.html"><i class="fa fa-check"></i><b>22</b> Utility functions</a>
<ul>
<li class="chapter" data-level="22.1" data-path="sec-utility.html"><a href="sec-utility.html#sec:selectByDate"><i class="fa fa-check"></i><b>22.1</b> Selecting data by date</a></li>
<li class="chapter" data-level="22.2" data-path="sec-utility.html"><a href="sec-utility.html#sec:cutData"><i class="fa fa-check"></i><b>22.2</b> Making intervals — cutData</a></li>
<li class="chapter" data-level="22.3" data-path="sec-utility.html"><a href="sec-utility.html#sec:selectRunning"><i class="fa fa-check"></i><b>22.3</b> Selecting run lengths of values above a threshold — pollution episodes</a></li>
<li class="chapter" data-level="22.4" data-path="sec-utility.html"><a href="sec-utility.html#sec:rollingMean"><i class="fa fa-check"></i><b>22.4</b> Calculating rolling means</a></li>
<li class="chapter" data-level="22.5" data-path="sec-utility.html"><a href="sec-utility.html#sec:timeAverage"><i class="fa fa-check"></i><b>22.5</b> Aggregating data by different time intervals</a></li>
<li class="chapter" data-level="22.6" data-path="sec-utility.html"><a href="sec-utility.html#sec:calcPercentile"><i class="fa fa-check"></i><b>22.6</b> Calculating percentiles</a></li>
<li class="chapter" data-level="22.7" data-path="sec-utility.html"><a href="sec-utility.html#sec:corPlot"><i class="fa fa-check"></i><b>22.7</b> Correlation matrices</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="annotating-openair-plots.html"><a href="annotating-openair-plots.html"><i class="fa fa-check"></i><b>A</b> Annotating openair plots</a>
<ul>
<li class="chapter" data-level="A.1" data-path="annotating-openair-plots.html"><a href="annotating-openair-plots.html#adding-text"><i class="fa fa-check"></i><b>A.1</b> Adding text</a></li>
<li class="chapter" data-level="A.2" data-path="annotating-openair-plots.html"><a href="annotating-openair-plots.html#adding-text-and-a-shaded-area"><i class="fa fa-check"></i><b>A.2</b> Adding text and a shaded area</a></li>
<li class="chapter" data-level="A.3" data-path="annotating-openair-plots.html"><a href="annotating-openair-plots.html#adding-an-arrow"><i class="fa fa-check"></i><b>A.3</b> Adding an arrow</a></li>
<li class="chapter" data-level="A.4" data-path="annotating-openair-plots.html"><a href="annotating-openair-plots.html#adding-a-reference-line-and-text"><i class="fa fa-check"></i><b>A.4</b> Adding a reference line and text</a></li>
<li class="chapter" data-level="A.5" data-path="annotating-openair-plots.html"><a href="annotating-openair-plots.html#highlight-a-specific-point"><i class="fa fa-check"></i><b>A.5</b> Highlight a specific point</a></li>
<li class="chapter" data-level="A.6" data-path="annotating-openair-plots.html"><a href="annotating-openair-plots.html#add-a-filled-polygon"><i class="fa fa-check"></i><b>A.6</b> Add a filled polygon</a></li>
<li class="chapter" data-level="A.7" data-path="annotating-openair-plots.html"><a href="annotating-openair-plots.html#add-air-quality-bands-as-polygons"><i class="fa fa-check"></i><b>A.7</b> Add air quality bands as polygons</a></li>
<li class="chapter" data-level="A.8" data-path="sec-polarPlot.html"><a href="sec-polarPlot.html#polar-plot-examples"><i class="fa fa-check"></i><b>A.8</b> Polar plot examples</a></li>
<li class="chapter" data-level="A.9" data-path="annotating-openair-plots.html"><a href="annotating-openair-plots.html#using-grid-graphics-identify-locations-interactively"><i class="fa fa-check"></i><b>A.9</b> Using grid graphics — identify locations interactively</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="sec-prod-hyspl-traj.html"><a href="sec-prod-hyspl-traj.html"><i class="fa fa-check"></i><b>B</b> Production of HYSPLIT trajectory files</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The openair book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sec:openair-package" class="section level1" number="2">
<h1><span class="header-section-number">Section2</span> The openair package</h1>
<p>In this book two packages are frequently used and it is a good idea
to load both.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="sec-openair-package.html#cb1-1" aria-hidden="true"></a><span class="kw">library</span>(openair)</span>
<span id="cb1-2"><a href="sec-openair-package.html#cb1-2" aria-hidden="true"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<p>Because the <span class="pkg">openair</span> package (and R itself) are
continually updated, it will be useful to know this document was
produced using R version 4.0.1 and <span class="pkg">openair</span> version
2.7-5.</p>
<div id="installation-and-code-access" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Installation and code access</h2>
<p><span class="pkg">openair</span> is avaiable on <a href="https://cran.r-project.org/mirrors.html">CRAN</a> (Comprehensive R Archive network) which means it can be installed easily from R. I would recommend re-starting R and then type <code>install.packages("openair")</code>. If you use <a href="https://rstudio.com/products/rstudio/">RStudio</a> (which is <em>highly</em> recommended), you can just choose the ‘packages’ tab on the bottom-right, and then select ‘Install’. Simply start typing openair and you will find the package.</p>
<p>For <span class="pkg">openair</span> all development is carried out using Github for version
control. Users can access all code used in openair at (<a href="https://github.com/davidcarslaw/openair" class="uri">https://github.com/davidcarslaw/openair</a>).</p>
<p>Sometimes it might be useful to install the development version of <span class="pkg">openair</span> and you can find instructions <a href="https://github.com/davidcarslaw/openair">here</a>.</p>
</div>
<div id="input-data-requirements" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Input data requirements</h2>
<p>The <span class="pkg">openair</span> package applies certain constraints on input data
requirements. <strong>It is important to adhere to these requirements to ensure that data are correctly formatted for use in</strong> <span class="pkg">openair</span>.
The principal reason for insisting on specific input data format is
that there will be less that can go wrong and it is easier to write
code for a more limited set of conditions.</p>
<ul>
<li><p>Data should be in a data frame (or <code>tibble</code>).</p></li>
<li><p><strong>The date/time field should be called <code>date</code></strong> —
note the lower case. No other name is acceptable.</p></li>
<li><p><strong>The wind speed and wind direction should be named <code>ws</code> and
<code>wd</code></strong>, respectively (note again, lower case). Wind directions follow the UK Met Office format and are represented as degrees from north
e.g. 90 degrees is east. North is taken to be 360 degrees</p></li>
<li><p>Where fields should have numeric data e.g. concentrations of
NO<sub>x</sub>, then the user should ensure that no other characters are
present in the column, accept maybe something that represents
missing data e.g. `no data’. .</p></li>
<li><p>Other variables names can be upper/lower case <em>but should
not start with a number</em>. If column names do have white spaces, R
will automatically replace them with a full-stop. While <code>PM2.5</code> as a
field name is perfectly acceptable, it is a pain to type it
in—better just to use <code>pm25</code> (<span class="pkg">openair</span> will recognise pollutant names like this and automatically format them as PM<sub>2.5</sub> in plots).</p></li>
</ul>
</div>
<div id="sec:brief-intr-open" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Brief overview of openair</h2>
<p>This section gives a brief overview of the functions in <span class="pkg">openair</span>.
Having read some data into a data frame it is then straightforward to
run any function. Almost all functions are run as:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="sec-openair-package.html#cb2-1" aria-hidden="true"></a><span class="kw">functionName</span>(thedata, options, ...)</span></code></pre></div>
<p>The usage is best illustrated through a specific example, in this case
the <code>polarPlot</code> function. The details of the function are shown in Section <a href="sec-polarPlot.html#sec:polarPlot">8</a> and through the help pages (type
?polarPlot). As it can be seen there are numerous options associated
with <code>polarPlot</code> — and most other functions and each of these has
a default. For example, the default pollutant considered in
<code>polarPlot</code> is <code>nox</code>. If the user has a data frame called
<code>theData</code> then <code>polarPlot</code> could minimally be called by:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="sec-openair-package.html#cb3-1" aria-hidden="true"></a><span class="kw">polarPlot</span>(theData)</span></code></pre></div>
<p>which would plot a <code>nox</code> polar plot if <code>nox</code> was available in the data
frame <code>theData</code>.</p>
<p>Note that the options do not need to be specified in order nor is it
always necessary to write the whole word. For example, it is possible
to write:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="sec-openair-package.html#cb4-1" aria-hidden="true"></a><span class="kw">polarPlot</span>(theData, <span class="dt">type =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">poll =</span> <span class="st">&quot;so2&quot;</span>)</span></code></pre></div>
<p>In this case writing <code>poll</code> is sufficient to uniquely identify that
the option is <code>pollutant</code>.</p>
<p>Also there are many common options available in functions that are not
explicitly documented, but are part of lattice graphics. Some common
ones are summarised in Table <a href="sec-openair-package.html#tab:options">2.1</a>. The <code>layout</code>
option allows the user to control the layout of multi-panel plots
e.g. <code>layout = c(4, 1)</code> would ensure a four-panel plot is 4 columns
by 1 row.</p>
<table>
<caption><span id="tab:options">Table 2.1: </span>Common options used in <span class="pkg">openair</span> plots that can be set by the user but are generally not explicitly documented.</caption>
<thead>
<tr class="header">
<th align="left">option</th>
<th align="left">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">xlab</td>
<td align="left">x-axis label</td>
</tr>
<tr class="even">
<td align="left">ylab</td>
<td align="left">y-axis label</td>
</tr>
<tr class="odd">
<td align="left">main</td>
<td align="left">title of the plot</td>
</tr>
<tr class="even">
<td align="left">pch</td>
<td align="left">plotting symbol used for points</td>
</tr>
<tr class="odd">
<td align="left">cex</td>
<td align="left">size of symbol plotted</td>
</tr>
<tr class="even">
<td align="left">lty</td>
<td align="left">line type</td>
</tr>
<tr class="odd">
<td align="left">lwd</td>
<td align="left">line width</td>
</tr>
<tr class="even">
<td align="left">layout</td>
<td align="left">the plot layout e.g. c(2, 2)</td>
</tr>
</tbody>
</table>
</div>
<div id="the-type-option" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> The type option</h2>
<p>One of the central themes in <span class="pkg">openair</span> is the idea of
<em>conditioning</em>. Rather than plot <span class="math inline">\(x\)</span> against <span class="math inline">\(y\)</span>,
considerably more information can usually be gained by considering a
third variable, <span class="math inline">\(z\)</span>. In this case, <span class="math inline">\(x\)</span> is plotted against <span class="math inline">\(y\)</span> for many
different intervals of <span class="math inline">\(z\)</span>. This idea can be further extended. For
example, a trend of NO<sub>x</sub> against time can be <em>conditioned</em> in
many ways: NO<sub>x</sub> vs. time split by wind sector, day of the week, wind
speed, temperature, hour of the day … and so on. This type of
analysis is rarely carried out when analysing air pollution data, in
part because it is time consuming to do. However, thanks to the
capabilities of R and packages such as <span class="pkg">lattice</span> and <span class="pkg">ggplot2</span>, it becomes easier to work in this way.</p>
<p>In most <span class="pkg">openair</span> functions conditioning is controlled using the
<code>type</code> option. <code>type</code> can be any other variable available in a
data frame (numeric, character or factor). A simple example of
<code>type</code> would be a variable representing a ‘before’ and ‘after’
situation, say a variable called <code>period</code> i.e. the option <code>type   = "period"</code> is supplied. In this case a plot or analysis would be
separately shown for ‘before’ and ‘after’. When <code>type</code> is a numeric
variable then the data will be split into four <em>quantiles</em> and
labelled accordingly. Note however the user can set the quantile
intervals to other values using the option <code>n.levels</code>. For example,
the user could choose to plot a variable by different levels of
temperature. If <code>n.levels = 3</code> then the data could be split by
‘low’, ‘medium’ and ‘high’ temperatures, and so on. Some variables are
treated in a special way. For example if <code>type = "wd"</code> then the
data are split into 8 wind sectors (N, NE, E, …) and plots are
organised by points of the compass.</p>
<p>There are a series of pre-defined values that <code>type</code> can take
related to the temporal components of the data as summarised in Table <a href="sec-openair-package.html#tab:openairType">2.2</a>. To use these there
<em>must</em> be a <code>date</code> field so that it can be calculated. These
pre-defined values of <code>type</code> are shown below are both useful and convenient. Given a
data frame containing several years of data it is easy to analyse the
data e.g. plot it, by year by supplying the option <code>type =   "year"</code>. Other useful and straightforward values are “hour” and
“month”. When <code>type = "season"</code> <span class="pkg">openair</span> will split the data by
the four seasons (winter = Dec/Jan/Feb etc.). Note for southern
hemisphere users that the option <code>hemisphere = "southern"</code> can be
given. When <code>type = "daylight"</code> is used the data are split between
nighttime and daylight hours. In this case the user can also supply
the options <code>latitude</code> and <code>longitude</code> for their location (the
default is London).</p>
<table>
<caption><span id="tab:openairType">Table 2.2: </span>Built-in ways of splitting data in <span class="pkg">openair</span> using the <code>type</code> option that is available for most functions.</caption>
<colgroup>
<col width="3%" />
<col width="96%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">option</th>
<th align="left">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">‘year’</td>
<td align="left">splits data by year</td>
</tr>
<tr class="even">
<td align="left">‘month’</td>
<td align="left">splits data by month of the year</td>
</tr>
<tr class="odd">
<td align="left">‘week’</td>
<td align="left">splits data by week of the year</td>
</tr>
<tr class="even">
<td align="left">‘monthyear’</td>
<td align="left">splits data by year <em>and</em> month</td>
</tr>
<tr class="odd">
<td align="left">‘season’</td>
<td align="left">splits data by season. Note in this case the user can also supply a <code>hemisphere</code> option that can be either ‘northern’ (default) or ‘southern’</td>
</tr>
<tr class="even">
<td align="left">‘weekday’</td>
<td align="left">splits data by day of the week</td>
</tr>
<tr class="odd">
<td align="left">‘weekend’</td>
<td align="left">splits data by Saturday, Sunday, weekday</td>
</tr>
<tr class="even">
<td align="left">‘daylight’</td>
<td align="left">splits data by nighttime/daytime. Note the user must supply a <code>longitude</code> and <code>latitude</code></td>
</tr>
<tr class="odd">
<td align="left">‘dst’</td>
<td align="left">splits data by daylight saving time and non-daylight saving time</td>
</tr>
<tr class="even">
<td align="left">‘wd’</td>
<td align="left">if wind direction (<code>wd</code>) is available <code>type = 'wd'</code> will split the data into 8 sectors: N, NE, E, SE, S, SW, W, NW</td>
</tr>
<tr class="odd">
<td align="left">‘seasonyear’</td>
<td align="left">will split the data into year-season intervals, keeping the months of a season together. For example, December 2010 is considered as part of winter 2011 (with January and February 2011). This makes it easier to consider contiguous seasons. In contrast, <code>type = 'season'</code> will just split the data into four seasons regardless of the year.</td>
</tr>
</tbody>
</table>
<p>If a categorical variable is present in a data frame e.g. <code>site</code> then
that variables can be used directly e.g. <code>type = "site"</code>.</p>
</div>
<div id="sec:font-size" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Controlling font size</h2>
<p>All <span class="pkg">openair</span> plot functions have an option <code>fontsize</code>. Users can
easily vary the size of the font for each plot e.g.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="sec-openair-package.html#cb5-1" aria-hidden="true"></a><span class="kw">polarPlot</span>(mydata, <span class="dt">fontsize =</span> <span class="dv">20</span>)</span></code></pre></div>
<p>The font size will be reset to the default sizes once the plot is
complete. Finer control of individual font sizes is currently not
easily possible.</p>
</div>
<div id="sec:colours" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Using colours</h2>
<p>Many of the functions described require that colour scales are used;
particularly for plots showing surfaces. It is only necessary to
consider using other colours if the user does not wish to use the
default scheme, shown at the top of Figure <a href="sec-openair-package.html#fig:colours">2.1</a>. The choice
of colours does seem to be a vexing issue as well as something that
depends on what one is trying to show in the first place. For this
reason, the colour schemes used in <span class="pkg">openair</span> are very flexible: if you
don’t like them, you can change them easily. R itself can handle
colours in many sophisticated ways; see for example the
<code>RColorBrewer</code> package.</p>
<p>Several pre-defined colour schemes are available to make it easy to
plot data. In fact, for most situations the default colour schemes
should be adequate. The choice of colours can easily be set; either by
using one of the pre-defined schemes or through a user-defined
scheme. More details can be found in the <span class="pkg">openair</span> <code>openColours</code>
function. Some defined colours are shown in Figure <a href="sec-openair-package.html#fig:colours">2.1</a>,
together with an example of a user defined scale that provides a
smooth transition from yellow to blue.</p>
<div class="figure"><span id="fig:colours"></span>
<img src="openair_files/figure-html/Colours-1.png" alt="Selected pre-defined colour scales in. The top colour scheme is a user-defined one." width="70%" />
<p class="caption">
Figure 2.1: Selected pre-defined colour scales in. The top colour scheme is a user-defined one.
</p>
</div>
<p>The user-defined scheme is very flexible and the following provides
examples of its use. In the examples shown next, the <code>polarPlot</code>
function is used as a demonstration of their use.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="sec-openair-package.html#cb6-1" aria-hidden="true"></a><span class="co"># use default colours - no need to specify</span></span>
<span id="cb6-2"><a href="sec-openair-package.html#cb6-2" aria-hidden="true"></a><span class="kw">polarPlot</span>(mydata)</span>
<span id="cb6-3"><a href="sec-openair-package.html#cb6-3" aria-hidden="true"></a></span>
<span id="cb6-4"><a href="sec-openair-package.html#cb6-4" aria-hidden="true"></a><span class="co"># use pre-defined &quot;jet&quot; colours</span></span>
<span id="cb6-5"><a href="sec-openair-package.html#cb6-5" aria-hidden="true"></a><span class="kw">polarPlot</span>(mydata, <span class="dt">cols =</span> <span class="st">&quot;jet&quot;</span>)</span>
<span id="cb6-6"><a href="sec-openair-package.html#cb6-6" aria-hidden="true"></a></span>
<span id="cb6-7"><a href="sec-openair-package.html#cb6-7" aria-hidden="true"></a><span class="co"># define own colours going from yellow to green</span></span>
<span id="cb6-8"><a href="sec-openair-package.html#cb6-8" aria-hidden="true"></a><span class="kw">polarPlot</span>(mydata, <span class="dt">cols =</span> <span class="kw">c</span>(<span class="st">&quot;yellow&quot;</span>, <span class="st">&quot;green&quot;</span>))</span>
<span id="cb6-9"><a href="sec-openair-package.html#cb6-9" aria-hidden="true"></a></span>
<span id="cb6-10"><a href="sec-openair-package.html#cb6-10" aria-hidden="true"></a><span class="co"># define own colours going from red to white to blue</span></span>
<span id="cb6-11"><a href="sec-openair-package.html#cb6-11" aria-hidden="true"></a><span class="kw">polarPlot</span>(mydata, <span class="dt">cols =</span> <span class="kw">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;white&quot;</span>, <span class="st">&quot;blue&quot;</span>))</span></code></pre></div>
<p>For more detailed information on using appropriate colours, have a look at the <a href="https://cran.r-project.org/web/packages/colorspace/vignettes/colorspace.html">colorspace</a> package. <span class="pkg">colorspace</span> provides the definitive, comprehensive approach to using colours effectively. You will need to install the package, <code>install.packages("colorspace")</code>. To use the palettes with <span class="pkg">openair</span>, you can for example do:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="sec-openair-package.html#cb7-1" aria-hidden="true"></a><span class="kw">library</span>(colorspace)</span>
<span id="cb7-2"><a href="sec-openair-package.html#cb7-2" aria-hidden="true"></a><span class="kw">library</span>(openair)</span>
<span id="cb7-3"><a href="sec-openair-package.html#cb7-3" aria-hidden="true"></a><span class="kw">windRose</span>(mydata, <span class="dt">cols =</span> <span class="kw">qualitative_hcl</span>(<span class="dv">4</span>, <span class="dt">palette =</span> <span class="st">&quot;Dark 3&quot;</span>))</span></code></pre></div>
<div class="figure"><span id="fig:unnamed-chunk-11"></span>
<img src="openair_files/figure-html/unnamed-chunk-11-1.png" alt="Example of using a [colorspace]{.pkg} palette with an [openair]{.pkg} function." width="50%" />
<p class="caption">
Figure 2.2: Example of using a <span class="pkg">colorspace</span> palette with an <span class="pkg">openair</span> function.
</p>
</div>
</div>
<div id="sec:quickText" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> Automatic text formatting</h2>
<p><span class="pkg">openair</span> tries to automate the process of annotating
plots. It can be time-consuming (and tricky) to repetitively type in
text to represent μg m<sup>-3</sup> or PM~10 (μg m<sup>-3</sup>) etc. in R. For this reason, an
attempt is made to automatically detect strings such as <code>nox</code> or
<code>NOx</code> and format them correctly. Where a user needs a y-axis label
such as NO<sub>x</sub> (μg m<sup>-3</sup>) it will only be necessary to type <code>ylab = "nox (ug/m3)"</code>. The same is also true for plot titles.</p>
<p>Users can override this option by setting it to FALSE.</p>
</div>
<div id="sec:multiple-plots-page" class="section level2" number="2.8">
<h2><span class="header-section-number">2.8</span> Multiple plots on a page</h2>
<p>We often get asked how to combine multiple plots on one page. Recent
changes to <span class="pkg">openair</span> makes this a bit easier. Note that because
<span class="pkg">openair</span> uses <span class="pkg">lattice</span> graphics the base graphics `par}
settings will not work.</p>
<p>It is possible to arrange plots based on a column <span class="math inline">\(\times\)</span> row
layout. Let’s put two plots side by side (2 columns, 1 row). First it
is necessary to assign the plots to a variable:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="sec-openair-package.html#cb8-1" aria-hidden="true"></a>a &lt;-<span class="st"> </span><span class="kw">windRose</span>(mydata)</span>
<span id="cb8-2"><a href="sec-openair-package.html#cb8-2" aria-hidden="true"></a>b &lt;-<span class="st"> </span><span class="kw">polarPlot</span>(mydata)</span></code></pre></div>
<p>Now we can plot them using the split option:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="sec-openair-package.html#cb9-1" aria-hidden="true"></a><span class="kw">print</span>(a, <span class="dt">split =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>))</span>
<span id="cb9-2"><a href="sec-openair-package.html#cb9-2" aria-hidden="true"></a><span class="kw">print</span>(b, <span class="dt">split =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>), <span class="dt">newpage =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<p>In the code above for the <code>split</code> option, the last two numbers give
the overall layout (2, 1) — 2 columns, 1 row. The first two numbers
give the column/row index for that particular plot. The last two
numbers remain constant across the series of plots being plotted.</p>
<p>There is one difficulty with plots that already contain sub-plots such
as <code>timeVariation</code> where it is necessary to identify the particular
plot of interest (see the <code>timeVariation</code> help for
details). However, say we want a polar plot (<code>b</code> above) and a
diurnal plot:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="sec-openair-package.html#cb10-1" aria-hidden="true"></a>c &lt;-<span class="st"> </span><span class="kw">timeVariation</span>(mydata)</span>
<span id="cb10-2"><a href="sec-openair-package.html#cb10-2" aria-hidden="true"></a><span class="kw">print</span>(b, <span class="dt">split =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>))</span>
<span id="cb10-3"><a href="sec-openair-package.html#cb10-3" aria-hidden="true"></a><span class="kw">print</span>(c, <span class="dt">split =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>), <span class="dt">subset =</span> <span class="st">&quot;hour&quot;</span>, <span class="dt">newpage =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<p>For more control it is possible to use the <code>position</code>
argument. <code>position</code> is a vector of 4 numbers, c(xmin, ymin, xmax,
ymax) that give the lower-left and upper-right corners of a rectangle
in which the plot is to be positioned. The coordinate system for this
rectangle is [0–1] in both the x and y directions.</p>
<p>As an example, consider plotting the first plot in the lower left
quadrant and the second plot in the upper right quadrant:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="sec-openair-package.html#cb11-1" aria-hidden="true"></a><span class="kw">print</span>(a, <span class="dt">position =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>), <span class="dt">more =</span> <span class="ot">TRUE</span>)</span>
<span id="cb11-2"><a href="sec-openair-package.html#cb11-2" aria-hidden="true"></a><span class="kw">print</span>(b, <span class="dt">position =</span> <span class="kw">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="dv">1</span>, <span class="dv">1</span>))</span></code></pre></div>
<p>The position argument gives more fine control over the plot location.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sec-importAURN.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/davidcarslaw/openair-book/edit/master/openair-package.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
